"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express = require("express");
const http = require("http");
const next = require("next");
const jogodavelha_1 = require("./WebSocket/jogodavelha");
const mensagens_1 = require("./WebSocket/mensagens");
const app = express();
const httpServer = http.createServer(app);
jogodavelha_1.wsJogoDaVelha(httpServer);
mensagens_1.wsMensagens(httpServer);
const porta = process.env.PORT || 3000;
// const porta = process.env.PORT || 3000;
const dev = process.env.NODE_ENV !== "production";
const nextAPP = next({ dev, dir: "./dist" });
const nextHandler = nextAPP.getRequestHandler();
nextAPP.prepare().then(() => {
    app.get("/", (req, res) => {
        nextAPP.render(req, res, "/index");
    });
    app.get("/mensagens", (req, res) => {
        nextAPP.render(req, res, "/mensagens");
    });
    app.get("*", (req, res) => {
        return nextHandler(req, res);
    });
    httpServer.listen(porta, (err) => {
        if (err) {
            // tslint:disable-next-line:no-console
            console.log(err);
            return;
        }
        // tslint:disable-next-line:no-console
        console.log(`SERVIDOR INICIOU NA PORTA: ${porta}`);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc2VydmVyL3NlcnZlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLG1DQUFtQztBQUNuQyw2QkFBNkI7QUFDN0IsNkJBQTZCO0FBQzdCLHlEQUF3RDtBQUN4RCxxREFBb0Q7QUFFcEQsTUFBTSxHQUFHLEdBQUcsT0FBTyxFQUFFLENBQUM7QUFDdEIsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUUxQywyQkFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzFCLHVCQUFXLENBQUMsVUFBVSxDQUFDLENBQUM7QUFFeEIsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDO0FBQ3ZDLDBDQUEwQztBQUMxQyxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsS0FBSyxZQUFZLENBQUM7QUFFbEQsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQzdDLE1BQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0FBRWhELE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFO0lBQzFCLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ3hCLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNyQyxDQUFDLENBQUMsQ0FBQztJQUVILEdBQUcsQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ2pDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxZQUFZLENBQUMsQ0FBQztJQUN6QyxDQUFDLENBQUMsQ0FBQztJQUVILEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO1FBQ3hCLE9BQU8sV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUMvQixDQUFDLENBQUMsQ0FBQztJQUVILFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUU7UUFDL0IsSUFBSSxHQUFHLEVBQUU7WUFDUCxzQ0FBc0M7WUFDdEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNqQixPQUFPO1NBQ1I7UUFDRCxzQ0FBc0M7UUFDdEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyw4QkFBOEIsS0FBSyxFQUFFLENBQUMsQ0FBQztJQUNyRCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgKiBhcyBodHRwIGZyb20gXCJodHRwXCI7XHJcbmltcG9ydCAqIGFzIG5leHQgZnJvbSBcIm5leHRcIjtcclxuaW1wb3J0IHsgd3NKb2dvRGFWZWxoYSB9IGZyb20gXCIuL1dlYlNvY2tldC9qb2dvZGF2ZWxoYVwiO1xyXG5pbXBvcnQgeyB3c01lbnNhZ2VucyB9IGZyb20gXCIuL1dlYlNvY2tldC9tZW5zYWdlbnNcIjtcclxuXHJcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcclxuY29uc3QgaHR0cFNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKGFwcCk7XHJcblxyXG53c0pvZ29EYVZlbGhhKGh0dHBTZXJ2ZXIpO1xyXG53c01lbnNhZ2VucyhodHRwU2VydmVyKTtcclxuXHJcbmNvbnN0IHBvcnRhID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwO1xyXG4vLyBjb25zdCBwb3J0YSA9IHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMDtcclxuY29uc3QgZGV2ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiO1xyXG5cclxuY29uc3QgbmV4dEFQUCA9IG5leHQoeyBkZXYsIGRpcjogXCIuL2Rpc3RcIiB9KTtcclxuY29uc3QgbmV4dEhhbmRsZXIgPSBuZXh0QVBQLmdldFJlcXVlc3RIYW5kbGVyKCk7XHJcblxyXG5uZXh0QVBQLnByZXBhcmUoKS50aGVuKCgpID0+IHtcclxuICBhcHAuZ2V0KFwiL1wiLCAocmVxLCByZXMpID0+IHtcclxuICAgIG5leHRBUFAucmVuZGVyKHJlcSwgcmVzLCBcIi9pbmRleFwiKTtcclxuICB9KTtcclxuXHJcbiAgYXBwLmdldChcIi9tZW5zYWdlbnNcIiwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBuZXh0QVBQLnJlbmRlcihyZXEsIHJlcywgXCIvbWVuc2FnZW5zXCIpO1xyXG4gIH0pO1xyXG5cclxuICBhcHAuZ2V0KFwiKlwiLCAocmVxLCByZXMpID0+IHtcclxuICAgIHJldHVybiBuZXh0SGFuZGxlcihyZXEsIHJlcyk7XHJcbiAgfSk7XHJcblxyXG4gIGh0dHBTZXJ2ZXIubGlzdGVuKHBvcnRhLCAoZXJyKSA9PiB7XHJcbiAgICBpZiAoZXJyKSB7XHJcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXHJcbiAgICBjb25zb2xlLmxvZyhgU0VSVklET1IgSU5JQ0lPVSBOQSBQT1JUQTogJHtwb3J0YX1gKTtcclxuICB9KTtcclxufSk7XHJcbiJdfQ==